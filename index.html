<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="https://unpkg.com/redux@latest/dist/redux.min.js"></script>
</head>
<body>
<div>
    <div style="margin-bottom: 20px;">
        Clicked: <span id="value">0</span> times
        <button id="increment">+</button>
        <button id="decrement">-</button>
        <button id="incrementIfOdd">Increment if odd</button>
        <button id="incrementAsync">Increment async</button>
    </div>
    <div>
        <label>
            a:
            <input type="text" id="a">
        </label>
        <label>
            b:
            <input type="text" id="b">
        </label>
        <label>
            sum:
            <input type="text" id="sum">
        </label>
        <button id="add">add</button>
    </div>
</div>
<script>
    var store = Redux.createStore(counter);

    var valueE1 = document.getElementById('value');
    var valueSum = document.getElementById('sum');

    function render() {
        var state = store.getState();
        valueE1.innerHTML = state.count;
        valueSum.value = state.sum;
    }
    render();

    store.subscribe(render);

    function counter(currentState, action) { //REDUCER
        var DEFAULT_STATE = {count: 0, sum: 0};
        var nextState = Object.assign({}, currentState);
        if (currentState === undefined) {
            nextState = DEFAULT_STATE;
            return nextState;
        }

        switch(action.type) {
            case 'DECREMENT':
                nextState.count = currentState.count - 1;
                return nextState;
            case 'INCREMENT':
                nextState.count = currentState.count + 1;
                return nextState;
            case 'SUM':
                nextState.sum = parseInt(action.a) + parseInt(action.b);
                return nextState;
            default:
                return nextState;
        }
    }

    document.getElementById('decrement').addEventListener('click', function () {
        var action = {type: 'DECREMENT'}; // Note 2.1
        store.dispatch(action);
    });
    document.getElementById('increment').addEventListener('click', function () {
        setTimeout(function increment() {
            var action = {type: 'INCREMENT'};
            store.dispatch(action);
        }, 1000);
    });
    document.getElementById('add').addEventListener('click', function () {
        var a = document.getElementById('a').value;
        var b = document.getElementById('b').value;
        var action = {type: 'SUM', a:a, b:b};
        store.dispatch(action);
    });
</script>
</body>
</html>